package ie.gmit.sw;

import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class QueryProcess {
	private BlockingQueue<Shingle> queue;
	private ExecutorService pool;
	private QueryShingleTaker taker;

	public QueryProcess() {
		super();
		taker=new QueryShingleTaker(queue);
	}

	public void queryFileRead(String fileName) {
		queue = new ArrayBlockingQueue<Shingle>(1);
		pool = Executors.newFixedThreadPool(2);

		pool.submit(taker);
		try {
			Thread.sleep(10);
		} catch (InterruptedException e) {
			e.printStackTrace();
		}
		pool.submit(new QueryFileParser(queue, fileName));
		try {
			Thread.sleep(10);
		} catch (InterruptedException e) {
			e.printStackTrace();
		}
		
		pool.shutdown();
		System.out.println("Shutdown....");
	}
	
	public ConcurrentHashMap<String, Integer> map(){
		return 
	}
}
